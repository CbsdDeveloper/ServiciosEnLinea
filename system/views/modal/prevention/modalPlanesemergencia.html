<md-dialog aria-label="Dialog" class="form-content-alt modal-dialog modal-lg" ng-controller="planExtendsCtrl">
  <form name="formData" ng-submit="submitForm()" class="form-uppercase">
  <md-toolbar>
    <div class="md-toolbar-tools">
			<md-button aria-label="btn" class="md-icon-button"><md-ico i=security></md-ico></md-button>
			<h2 class="md-flex" translate>TOOLBAR_PLANS</h2>
      <span flex></span>
      <md-button aria-label="btn" class="md-icon-button" aria-label="Close dialog" ng-click="closeDialog()"><md-ico i=remove></md-ico></md-button>
    </div>
  </md-toolbar>
  <md-dialog-content>
    <md-content layout=column layout-padding>
    	<!-- INFORMACIÓN DEL PLAN DE EMERGENCIA -->
    	<card-plan-information layout-padding></card-plan-information>
			<!-- INFORMACIÓN DEL ESTABLECIMIENTO -->
			<div class="card card-outline card-primary no-margin margin-top" layout-padding>
				<div class="card-header text-center">
				  <h3 class="card-title" translate>LB_PROPERTY_INFORMATION</h3>
				</div>
				<div class="card-body padding-all" layout-padding>
					<div layout-xs=column layout=row layout-padding>
						<div class="form-group required" flex>
						  <label translate>LB_PEOPLE_WORK</label>
						  <div class="input-group">
						    <div class="input-group-prepend"><div class="input-group-text"><md-ico i=info_outline></md-ico></div></div>
						    <input class="form-control font-digital" type="number" step="1" min=0 parse-float ng-model="frmParent.local.local_ocupantes" required />
						  </div>
						</div>
						<div class="form-group" flex>
						  <label translate>LB_CLIENTS_PER_DAY</label>
						  <div class="input-group">
						    <div class="input-group-prepend"><div class="input-group-text"><md-ico i=info_outline></md-ico></div></div>
						    <input class="form-control font-digital" type="number" step="1" min=0 parse-float ng-model="frmParent.local.local_visitantes" required />
						  </div>
						</div>
					</div>
					
					<div layout-xs=column layout=row layout-padding>
						<div class="form-group required" flex>
						  <label translate>LB_FLOORS_PLACE</label>
						  <div class="input-group">
						  	<div class="input-group-prepend"><div class="input-group-text"><md-ico i=info_outline></md-ico></div></div>
						    <input class="form-control font-digital" type="number" step="1" min=0 parse-float ng-model="frmParent.local.local_pisos" required />
						  </div>
						</div>
						<div class="form-group required" flex>
						  <label translate>LB_SUBSOILS_PLACE</label>
						  <div class="input-group">
						  	<div class="input-group-prepend"><div class="input-group-text"><md-ico i=info_outline></md-ico></div></div>
						    <input class="form-control font-digital" type="number" step="1" min=0 parse-float ng-model="frmParent.local.local_subsuelos" required />
						  </div>
						</div>
					</div>
					
					<div layout-xs=column layout=row layout-padding>
						<div class="form-group required" flex>
							<label translate>LB_EDIFICATION_AREA</label>
							<div class="input-group">
								<div class="input-group-prepend"><div class="input-group-text"><md-ico i=info_outline></md-ico></div></div>
								<input class="form-control font-digital" type="number" step="0.01" min=1 max="100000" parse-float ng-model="frmParent.local.local_area_planta_baja" required />
							</div>
						</div>
						<div class="form-group required" flex>
							<label translate>LB_SUBSOILS_AREA</label>
							<div class="input-group">
								<div class="input-group-prepend"><div class="input-group-text"><md-ico i=info_outline></md-ico></div></div>
								<input class="form-control font-digital" type="number" step="0.01" min=0  parse-float ng-model="frmParent.local.local_area_subsuelos" required />
							</div>
						</div>
					</div>
						
					<div layout-xs=column layout=row layout-padding>
						<div class="form-group required" flex>
							<label translate>LB_USEFUL_AREA</label>
							<div class="input-group">
								<div class="input-group-prepend"><div class="input-group-text"><md-ico i=aspect_ratio></md-ico></div></div>
								<input class="form-control font-digital" type="number" step="0.01" min=1 parse-float ng-model="frmParent.local.local_area" required />
							</div>
						</div>
						<div class="form-group required" flex>
						  <label translate>LB_CATASTRAL_KEY</label>
							<div class="input-group">
								<div class="input-group-prepend"><div class="input-group-text"><i-fa i=podcast></i-fa></div></div> 
								<input class="form-control font-digital" ng-model="frmParent.local.local_clavecatastral" placeholder="Ej. 170256314" required />
							</div>
						</div>
					</div>
				</div>
			</div>
    	<!-- INFORMACIÓN FORMULARIO -->
    	<div class="card card-outline card-success no-margin margin-top" layout-padding ng-if="toogleEditMode && frmParent.plan_estado=='SUSPENDIDO'">
				<div class="card-header text-center">
				  <h3 class="card-title" translate>LB_REASON_SUSPENSION</h3>
				</div>
				<div class="card-body padding-all" layout-padding>
					<div layout-xs=column layout=row layout-padding>
						<div class="form-group required" flex>
							<label translate>LB_REASON</label>
							<div class="input-group">
								<div class="input-group-prepend"><div class="input-group-text"><md-ico i=flag></md-ico></div></div> 
								<textarea class="form-control" ng-model="frmParent.plan_observacion" ></textarea>
							</div>
						</div>
					</div>
				</div>
			</div>
    	<!-- INFORMACIÓN FORMULARIO -->
    	<div class="card card-outline card-success no-margin margin-top" layout-padding ng-if="(frmParent.plan_estado=='ASIGNADO' || frmParent.plan_estado=='REVISION' || frmParent.plan_estado=='CORRECCION' || frmParent.plan_estado=='REVISADO' || frmParent.plan_estado=='PAGADO' || frmParent.plan_estado=='APROBADO')">
				<div class="card-header text-center">
				  <h3 class="card-title" translate>LB_REVIEW_INFORMATION</h3>
				</div>
				<div class="card-body padding-all" layout-padding>
					
					<div class="form-group required" flex>
						<label translate>LB_SELECT_TYPE_OF_REGISTRY</label>
						<div class="input-group">
							<div class="input-group-prepend"><div class="input-group-text"><md-ico i=call_split></md-ico></div></div> 
								<select class="form-control" ng-model="frmParent.plan_tipo" required ng-options="val as val for (key,val) in string2JSON('SELFPROTECTIONPLAN_TYPES_LIST')"></select>
						</div>
					</div>
					
					<div layout-xs=column layout=row layout-padding>
						<div class="form-group required" ng-if="frmParent.plan_estado!='APROBADO'" flex>
							<label translate>LB_STATUS</label>
							<div class="input-group">
								<div class="input-group-prepend"><div class="input-group-text"><md-ico i=flag></md-ico></div></div> 
									<select class="form-control" ng-model="frmParent.plan_estado" ng-options="key as val for (key,val) in string2JSON('reviewStatusList')"></select>
							</div>
						</div>
						<div class="form-group required" ng-if="(frmParent.plan_estado=='REVISADO' || frmParent.plan_estado=='APROBADO')" flex>
							<label translate>LB_DATE_ELABORATION</label>
							<div class="input-group" moment-picker="frmParent.plan_elaborado" format="YYYY-MM-DD">
								<div class="input-group-prepend"><div class="input-group-text"><i-fa i=calendar-plus-o></i-fa></div></div> 
								<input ng-model="frmParent.plan_elaborado" class="form-control" placeholder="Ej. 2006-06-06" required />
							</div>
						</div>
					</div>
					<div class="form-group required">
						<label translate>LB_OBSERVATION</label>
						<div class="input-group">
							<div class="input-group-prepend"><div class="input-group-text"><md-ico i=comment></md-ico></div></div> 
								<textarea class="form-control" ng-model="frmParent.plan_observacion" ></textarea> 
						</div>
					</div>
				</div>
			</div>
    </md-content>
  </md-dialog-content>
  <md-dialog-actions layout="row">
		<md-button type="submit" ng-disabled="formData.$invalid"><span translate>BTN_SAVE</span></md-button>
		<span flex></span>
		<md-button type="button" ng-click="closeDialog()"><span translate>BTN_CANCEL</span></md-button>
	</md-dialog-actions>
  </form>
</md-dialog>