<form name="formData" layout-padding>

	<md-toolbar layout-padding>
		<div class="md-toolbar-tools">
		  	<md-button aria-label="btn" class="md-icon-button"><md-ico i=store_mall_directory></md-ico></md-button>
		  	<h2>{{dataEntity.i.local_nombrecomercial}}</h2>
		    <span flex></span>
		    <span>{{toolbar}}</span>
		</div>
	</md-toolbar>
	
	<div layout-xs=column layout=row layout-padding>
		<div class="card card-outline card-danger no-margin margin-top" layout-padding flex>
			<div class="card-header with-border text-center">
			  <h3 class="card-title" translate>LB_PERSON_REQUESTING</h3>
			</div>
			<div class="card-body padding-all" layout=column layout-padding>
				<div layout-xs=column layout=row layout-padding>
					<div class="form-group required" flex>
						<label translate>LB_IDENTIFICATION_TYPE</label>
						<div class="input-group">
							<div class="input-group-prepend"><div class="input-group-text"><i-fa i=credit-card></md-ico></div></div> 
							<select class="form-control input-sm select2" ng-model="dataEntity.frmParent.persona_tipo_doc" required ng-options="key as val for (key,val) in string2JSON('identificationType')"></select>
						</div>
					</div>
					<div class="form-group required" flex>
						<label translate>LB_IDENTIFICATION_NUMBER</label>
						<div class="input-group">
							<div class="input-group-prepend"><div class="input-group-text"><i-fa i=id-card-o></md-ico></div></div> 
							<input ng-model="dataEntity.frmParent.persona_doc_identidad" class="form-control input-sm" required maxlength=20>
						</div>
					</div>
				</div>
				<div layout-xs=column layout=row layout-padding>
					<div class="form-group required" flex>
						<label translate>LB_LASTNAME</label>
						<div class="input-group">
							<div class="input-group-prepend"><div class="input-group-text"><i-fa i=user></md-ico></div></div> 
							<input ng-model="dataEntity.frmParent.persona_apellidos" class="form-control input-sm" required>
						</div>
					</div>
					<div class="form-group required" flex>
						<label translate>LB_NAME</label>
						<div class="input-group">
							<div class="input-group-prepend"><div class="input-group-text"><i-fa i=user-o></md-ico></div></div> 
					    <input ng-model="dataEntity.frmParent.persona_nombres" class="form-control input-sm" required>
						</div>
					</div>
				</div>
				<div layout-xs=column layout=row layout-padding>
					<div class="form-group required" flex>
						<label translate>LB_TEL</label>
						<div class="input-group">
							<div class="input-group-prepend"><div class="input-group-text"><md-ico i=phone_iphone></md-ico></div></div> 
					    <input type="tel" ng-model="dataEntity.frmParent.persona_celular" class="form-control input-sm" required>
						</div>
					</div>
					<div class="form-group required" flex>
						<label translate>LB_MAIL</label>
						<div class="input-group">
							<div class="input-group-prepend"><div class="input-group-text"><i-fa i=envelope-o></md-ico></div></div> 
							<input type="email" ng-model="dataEntity.frmParent.persona_correo" class="form-control input-sm" required>
						</div>
					</div>
				</div>
				<div class="form-group required" flex>
					<label translate>LB_CHARGE_RESPONSIBLE</label>
					<div class="input-group">
						<div class="input-group-prepend"><div class="input-group-text"><i-fa i=address-book></md-ico></div></div> 
						<input ng-model="dataEntity.frmParent.prorroga_solicitante_cargo" class="form-control input-sm" required>
					</div>
				</div>
			</div>
		</div>
		<div class="card card-outline card-success no-margin margin-top" layout-padding flex>
			<div class="card-header with-border text-center">
			  <h3 class="card-title" translate>LB_EXTENSION_INFORMATION</h3>
			</div>
			<div class="card-body padding-all" layout=column layout-padding>
				<div class="form-group required" flex>
					<label translate>LB_INSPECTION</label>
					<div class="input-group">
						<div class="input-group-prepend"><div class="input-group-text"><md-ico i=spellcheck></md-ico></div></div> 
						<input ng-model="dataEntity.i.inspeccion_codigo" class="form-control input-sm" readonly="readonly">
					</div>
				</div>
				<div layout-xs=column layout=row layout-padding>
					<div class="form-group required" flex>
						<label translate>LB_ENABLE_FROM</label>
						<div class="input-group" min-date="today" moment-picker="dataEntity.frmParent.prorroga_desde" format="YYYY-MM-DD">
							<div class="input-group-prepend"><div class="input-group-text"><i-fa i=calendar-check-o></md-ico></div></div> 
					    <input class="form-control input-sm" ng-model="dataEntity.frmParent.prorroga_desde" required>
						</div>
					</div>
					<div class="form-group required" flex>
						<label translate>LB_ENABLE_UPTO</label> 
						<div class="input-group" min-date="dataEntity.frmParent.prorroga_desde" moment-picker="dataEntity.frmParent.prorroga_hasta" format="YYYY-MM-DD">
							<div class="input-group-prepend"><div class="input-group-text"><i-fa i=calendar-times-o></md-ico></div></div> 
					    <input class="form-control input-sm" ng-model="dataEntity.frmParent.prorroga_hasta" required>
						</div>
					</div>
				</div>
				<div class="form-group required">
					<label translate>LB_REASON</label>
					<div class="input-group">
						<div class="input-group-prepend"><div class="input-group-text"><i-fa i=hourglass-start></md-ico></div></div> 
				    <textarea rows="5" class="form-control input-sm" ng-model="dataEntity.frmParent.prorroga_detalle" placeholder="Ej. Movimiento Juan XXIII" required ></textarea>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="margin-top" style="font-size:12px;" ng-repeat="(key, resources) in dataEntity.fails" layout-padding>
		<div class="card card-outline card-{{string2JSON('colorCss')[$index]}} no-margin" flex>
			<div class="card-header with-border text-center">
				<h3 class="card-title">{{key}}</h3>
        <div class="card-tools">
	        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fa fa-minus"></i></button>
				</div>
			</div>
			<div class="card-body" style="background:#e5e9ee;padding-top:16px;" layout=row>
				<div class="timeline" style="width:100%">
				
					<div ng-repeat="(key, list) in resources">
						<i class="fa fa-{{dataEntity.src.icon[key]}} bg-{{string2JSON('colorName')[$index+$parent.$index]}}"></i>
				    <div class="timeline-item">
				    	<h3 class="timeline-header" layout=row layout-wrap>
				    		<b>{{key}}</b>
				    	</h3>
				      <div class="timeline-body" layout-xs=column layout=row layout-padding layout-wrap>
								<div style="min-width:50%" ng-repeat="item in list" layout=column flex>
									<div layout=column flex>
										<b>{{item.regla_id}}. {{item.regla_nombre}}</b>
										<md-radio-group ng-model="dataEntity.model[item.regla_id].implementacion_aplica" layout=row>
								      <md-radio-button value="SI APLICA" class="md-warn">SI APLICA</md-radio-button>
								      <md-radio-button value="NO APLICA" class="md-primary">NO APLICA</md-radio-button>
								    </md-radio-group>
									</div>
									<div class="no-padding row" layout=column layout-padding ng-if="dataEntity.model[item.regla_id].implementacion_aplica=='SI APLICA'">
										<div class="no-padding-top no-padding-bottom" layout-xs=column layout=row layout-padding>
											<div class="form-group required" flex>
												<label translate>LB_START_OF_IMPLEMENTATION</label>
												<div class="input-group" min-date="dataEntity.frmParent.prorroga_desde" max-date="dataEntity.frmParent.prorroga_hasta" moment-picker="dataEntity.model[item.regla_id].implementacion_desde" format="YYYY-MM-DD">
													<div class="input-group-prepend"><div class="input-group-text"><i-fa i=calendar-check-o></md-ico></div></div> 
											    <input class="form-control input-sm" ng-model="dataEntity.model[item.regla_id].implementacion_desde">
												</div>
											</div>
											<div class="form-group required" flex>
												<label translate>LB_DATE_OF_IMPLEMENTATION</label> 
												<div class="input-group" min-date="dataEntity.model[item.regla_id].implementacion_desde" max-date="dataEntity.frmParent.prorroga_hasta" moment-picker="dataEntity.model[item.regla_id].implementacion_hasta" format="YYYY-MM-DD">
													<div class="input-group-prepend"><div class="input-group-text"><i-fa i=calendar-times-o></md-ico></div></div> 
											    <input class="form-control input-sm" ng-model="dataEntity.model[item.regla_id].implementacion_hasta">
												</div>
											</div>
										</div>
										<div class="no-padding-top" flex>
											<div class="no-padding-top form-group required">
												<label translate>LB_REASON</label>
												<div class="input-group">
													<div class="input-group-prepend"><div class="input-group-text"><i-fa i=comments></md-ico></div></div> 
											    <textarea class="form-control input-sm" ng-model="dataEntity.model[item.regla_id].implementacion_motivo"></textarea>
												</div>
											</div>
										</div>
									</div>
									
								</div>
							</div>
						</div>
					</div>
					
				  <div><i class="fa fa-clock-o bg-gray"></i></div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="card-footer margin-top" layout=row layout-align="space-between center">
		<md-button class="md-raised md-warn" ui-sref="prevention.inspections.extensions" flex>
	  	<i-fa i="arrow-left"></i-fa>
	  	<span translate>BTN_CANCEL</span>
		</md-button>
		<md-button class="md-raised md-primary" type="button" ng-click="submitForm()" ng-disabled="formData.$invalid" flex>
			<span translate>BTN_SUBMIT</span>
			<md-ico i=send s=18></md-ico>
		</md-button>
	</div>

</form>