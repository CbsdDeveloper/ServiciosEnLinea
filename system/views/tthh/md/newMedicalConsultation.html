<div class=no-padding layout-padding>

	<!-- TOOLBAR -->
	<div>
		<md-toolbar ng-hide="filter.show" flex>
			<div class="md-toolbar-tools">
				<md-button aria-label="btn" class="md-icon-button"><md-ico i=add_alert></md-ico></md-button>
				<h2 translate>LB_MEDICAL_CONSULTATIONS</h2>
				<span flex></span>
				<small><span>{{dataEntity.patient.personal_nombre}} ({{dataEntity.patient.historia_serie}})</span></small>
			</div>
		</md-toolbar>
	</div>
	
	<!-- FORMULARIO DE REGISTRO -->
	<form name="formData" ng-submit="submitForm()" layout=column layout-padding>
			
		<div layout=column layout-padding flex>
			
			<!-- CONSULTAS PREVIAS -->
			<div layout-xs=column layout=row layout-padding flex>
				
				<!-- CONSULTAS PREVIAS -->
				<div flex>
					<div class="card card-outline collapsed-card no-margin no-radius" ng-class="[{'card-primary':dataEntity.patient.persona_sexo=='HOMBRE','card-danger':dataEntity.patient.persona_sexo=='MUJER'}]">
						<div class="card-header">
							<h3 class="card-title" translate>LB_FILIATION_DATA</h3>
							<div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse">
                	<i class="fa fa-plus"></i>
              	</button>
							</div>
						</div>
					  <div class="card-body card-profile text-left">
					    <div class="container-img-user">
					    	<img class="profile-user-img img-responsive" src="/app/src/img/users/default.png" ng-src="/app/src/img/users/{{dataEntity.patient.persona_imagen}}" alt="profile">
					    </div>
							<h3 class="profile-username text-center">
								{{dataEntity.patient.personal_nombre}}
								<button type="button" class="btn btn-tool" ng-click="$parent.openCustomModal('tthh/md','Historiasclinicas',dataEntity.patient)" ng-if="allow.permiso8153">
									<i class="fa fa-pencil"></i><md-tooltip><span translate>LB_EDIT</span></md-tooltip>
								</button>
							</h3>
					    <ul class="list-group list-group-unbordered text-left no-margin margin-bottom">
                <li class="list-group-item">
                  <md-ico i=person_add s=18></md-ico> <b translate>LB_CLINIC_HISTORY</b> <a class="pull-right">{{dataEntity.patient.historia_serie}}</a>
                </li>
                <li class="list-group-item">
                  <md-ico i=credit_card s=18></md-ico> <b translate>LB_DOC_IDENTIFICATION</b> <a class="pull-right">{{dataEntity.patient.persona_doc_identidad}}</a>
                </li>
                <li class="list-group-item">
                  <i-fa i=birthday-cake></i-fa> <b translate>LB_BIRTHDATE</b> <a class="pull-right">{{dataEntity.patient.persona_fnacimiento | date:'longDate'}}</a>
                </li>
                <li class="list-group-item">
                  <i-fa i=birthday-cake></i-fa> <b translate>LB_AGE</b> <a class="pull-right">{{dataEntity.patient.edad}}</a>
                </li>
                <li class="list-group-item">
                  <i-fa i=medkit></i-fa> <b translate>LB_BLOOD_TYPE</b> <a class="pull-right">{{dataEntity.patient.persona_tiposangre}}</a>
                </li>
                <li class="list-group-item">
                  <md-ico i=favorite_border s=18></md-ico> <b translate>LB_MARITAL_STATUS</b> <a class="pull-right">{{dataEntity.patient.persona_estadocivil}}</a>
                </li>
                <li class="list-group-item">
                  <md-ico i=phone s=18></md-ico> <b translate>LB_TEL</b> <a class="pull-right">{{dataEntity.patient.persona_telefono}} - {{dataEntity.patient.persona_celular}}</a>
                </li>
              </ul>
              <strong><md-ico i=history s=18></md-ico> <span translate>LB_BACKGROUND</span></strong>
              <p class="text-center">
                <span class="label" ng-class="[{'label-danger':dataEntity.patient.historia_drogas=='SI','label-success':dataEntity.patient.historia_drogas=='NO'}]" translate>LB_DRUGS</span>
                <span class="label" ng-class="[{'label-danger':dataEntity.patient.historia_tabaco=='SI','label-success':dataEntity.patient.historia_tabaco=='NO'}]" translate>LB_TOBACCO</span>
                <span class="label" ng-class="[{'label-danger':dataEntity.patient.historia_alcohol=='SI','label-success':dataEntity.patient.historia_alcohol=='NO'}]" translate>LB_ALCOHOLIC_BEVERAGES</span>
                <span class="label" ng-class="[{'label-danger':dataEntity.patient.apf=='SI','label-success':dataEntity.patient.apf=='NO'}]">APF</span>
                <span class="label" ng-class="[{'label-danger':dataEntity.patient.app=='SI','label-success':dataEntity.patient.app=='NO'}]">APP</span>
                <span class="label" ng-class="[{'label-danger':dataEntity.patient.aqx=='SI','label-success':dataEntity.patient.aqx=='NO'}]">AQX</span>
                <span class="label" ng-class="[{'label-danger':dataEntity.patient.alergias=='SI','label-success':dataEntity.patient.alergias=='NO'}]" translate>LB_ALLERGIES</span>
                <span class="label" ng-class="[{'label-danger':dataEntity.patient.discapacidad=='SI','label-success':dataEntity.patient.discapacidad=='NO'}]" translate>LB_DISABILITY</span>
              </p>
              <hr>
              <div ng-if="dataEntity.patient.historia_drogas=='SI'">
	              <strong><md-ico i=touch_app s=18></md-ico> <b translate>LB_USE_DRUGS</b></strong>
	              <p class="text-muted">{{dataEntity.patient.historia_drogas_detalle}}</p>
              </div>
              <div ng-if="dataEntity.patient.historia_tabaco=='SI'">
	              <strong><md-ico i=smoking_rooms></md-ico> <b translate>LB_CONSUME_TOBACCO</b></strong>
	              <p class="text-muted">{{dataEntity.patient.historia_tabaco_detalle}}</p>
              </div>
              <div ng-if="dataEntity.patient.historia_alcohol=='SI'">
	              <strong><md-ico i=local_bar s=18></md-ico> <b translate>LB_CONSUME_ALCOHOLIC_BEVERAGES</b></strong>
	              <p class="text-muted">{{dataEntity.patient.historia_alcohol_detalle}}</p>
              </div>
					  </div>
					</div>
				</div>
				
				<!-- ANTECEDENTES PATOLOGICOS -->
				<div flex>
					<div class="card collapsed-card no-margin no-radius">
						<div class="card-header with-border text-center">
							<h3 class="card-title" translate>LB_PERSONAL_HISTORY</h3>
							<div class="card-tools">
								<button type="button" class="btn btn-tool" ng-click="$parent.openCustomModal('tthh/md','Antecedentesenfermedades',{edit:false,staffId:dataEntity.patient.personal_id})" ng-if="allow.permiso8182">
									<md-ico i=playlist_add s=18></md-ico><md-tooltip><span translate>LB_NEW</span></md-tooltip>
								</button>
								<button type="button" class="btn btn-tool" data-card-widget="collapse">
									<i class="fa fa-plus"></i><md-tooltip><span translate>LB_VIEW_HIDE_DETAIL</span></md-tooltip>
								</button>
							</div>
						</div>
					  <div class="card-body text-uppercase" style="font-size:11px;">
               <div class="card card-outline card-{{string2JSON('colorCss')[$index]}} collapsed-card no-margin margin-bottom" ng-repeat="row in dataEntity.background">
                 <div class="card-header with-border">
                   <h4 class="card-title">
                     <small>{{row.clasificacion}} <b ng-if="row.antecedente_relacion=='FAMILIAR'">({{row.antecedente_parentesco}})</b>: <span class="text-{{string2JSON('colorCss')[$index]}} text-bold">{{row.antecedente_enfermedad}}</span></small>
                   </h4>
                   <div class="card-tools">
										<button type="button" class="btn btn-tool" ng-click="$parent.openModal('Antecedentesenfermedades',row)" ng-if="allow.permiso8184">
											<i class="fa fa-pencil"></i><md-tooltip><span translate>LB_EDIT</span></md-tooltip>
										</button>
										<button type="button" class="btn btn-tool" data-card-widget="collapse">
											<i class="fa fa-plus"></i><md-tooltip><span translate>LB_VIEW_HIDE_DETAIL</span></md-tooltip>
										</button>
									</div>
                 </div>
                 <div class="card-body">
                 	<small><md-ico i=flag s=12></md-ico> <b>{{row.antecedente_estado}}</b>: {{row.antecedente_descripcion}}</small>
                 	<small ng-if="row.antecedente_clasificacion=='DISCAPACIDAD'"><br><i-fa i=blind></i-fa> <b>{{row.discapacidad_tipo}}</b>: {{row.discapacidad_porcentaje | number:1}}%</small>
                 </div>
               </div>
					  </div>
					</div>
				</div>
				
				<!-- CONSULTAS PREVIAS -->
				<div flex>
					<div class="card collapsed-card no-margin no-radius">
						<div class="card-header with-border text-center">
							<h3 class="card-title" translate>LB_PREVIOUS_CONSULTATIONS</h3>
							<div class="card-tools">
								<button type="button" class="btn btn-tool" data-card-widget="collapse">
									<i class="fa fa-plus"></i><md-tooltip md-direction='left'><span translate>LB_VIEW_HIDE_DETAIL</span></md-tooltip>
								</button>
							</div>
						</div>
						<div class="card-body text-uppercase" style="font-size:11px;">
							<div class="card collapsed-card no-margin margin-bottom" ng-repeat="row in dataEntity.previous">
                <div class="card-header with-border">
                  <h4 class="card-title">
                    <small class="text-{{string2JSON('colorCss')[$index]}} text-bold">{{row.consulta_serie}}. {{row.consulta_motivo}}</small>
                  </h4>
                  <div class="card-tools">
										<button type="button" class="btn btn-tool" ng-click="exportById('consultasmedicas',row.consulta_id)">
											<i class="fa fa-print"></i><md-tooltip><span translate>LB_PRINT</span></md-tooltip>
										</button>
										<button type="button" class="btn btn-tool" data-card-widget="collapse">
											<i class="fa fa-plus"></i><md-tooltip md-direction='left'><span translate>LB_VIEW_HIDE_DETAIL</span></md-tooltip>
										</button>
									</div>
                </div>
                <div class="card-body">
                	<md-ico i=event s=12></md-ico> {{row.consulta_fecha_consulta}}<br>
                	<md-ico i=info s=12></md-ico> {{row.consulta_enfermedad_actual}}
                </div>
              </div>
						</div>
					</div>
				</div>
				
			</div>
			
			<!-- FORMULARIO DE REGISTRO -->
			<div layout-xs=column layout=row layout-padding flex>
				
				<!-- ANTECEDENTES PATOLOGICOS DEL PACIENTE -->
				<div flex>
					<div class="timeline">
					
						<div class="time-label text-uppercase">
			        <span class="bg-maroon padding-all" translate>LB_PATHOLOGICAL_BACKGROUND</span>
			      </div>
			      
			      <!-- ANTECEDENTES PATOLOGICOS -->
						<div>
							<i class="fa fa-user bg-green"></i>
					    <div class="timeline-item">
					      <h3 class="timeline-header text-center text-uppercase"><a href="#"><span translate>LB_BACKGROUND_PATIENT</span></a></h3>
					      <div class="timeline-body" layout-padding>
					      	
					      	<div class="form-group required" flex>
		                <label translate>LB_MEDICALHISTORY_APP</label>
		                <div class="input-group">
		                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=person></md-ico></div></div> 
		                  <textarea rows="3" ng-model="dataEntity.patient.historia_app" class="form-control" required></textarea>
		                </div>
		              </div>
		              
		              <div class="form-group required" flex>
		                <label translate>LB_MEDICALHISTORY_APF</label>
		                <div class="input-group">
		                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=people></md-ico></div></div> 
		                  <textarea rows="3" ng-model="dataEntity.patient.historia_apf" class="form-control" required></textarea>
		                </div>
		              </div>
		              <div class="form-group required" flex>
		                <label translate>LB_MEDICALHISTORY_AQX</label>
		                <div class="input-group">
		                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=local_hospital></md-ico></div></div> 
		                  <textarea rows="3" ng-model="dataEntity.patient.historia_aqx" class="form-control" required></textarea>
		                </div>
		              </div>
		              <div class="form-group required" flex>
		                <label translate>LB_ALLERGIES</label>
		                <div class="input-group">
		                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=voice_over_off></md-ico></div></div>  
		                  <textarea rows="3" ng-model="dataEntity.patient.historia_alergias" class="form-control" required></textarea>
		                </div>
		              </div>
		              <div class="form-group required" flex>
		                <label translate>LB_OTHERS</label>
		                <div class="input-group">
		                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=info></md-ico></div></div>  
		                  <textarea rows="2" ng-model="dataEntity.patient.historia_otros" class="form-control"></textarea>
		                </div>
		              </div>
					      
					      </div>
					    </div>
					  </div>
						
						<!-- INFORMACION ADICIONAL DE MUJERES -->
						<div ng-if="dataEntity.patient.persona_sexo=='MUJER'">
							<i class="fa fa-female bg-red"></i>
					    <div class="timeline-item">
					      <h3 class="timeline-header text-center text-uppercase"><a href="#"><span translate>LB_EXTRA_INFORMATION</span></a></h3>
					      <div class="timeline-body" layout-padding>
					      	<div layout=column layout-padding>
			              <div class="form-group required" flex>
			                <label translate>LB_MEDICALHISTORY_MENARQUIA</label>
			                <div class="input-group">
			                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=event></md-ico></div></div>  
			                  <input ng-model="dataEntity.patient.historia_menarquia" class="form-control">
			                </div>
			              </div>
			              <div class="form-group required" flex>
			                <label translate>LB_MEDICALHISTORY_OBSTETRIC_BACKGROUND</label>
			                <div class="input-group">
			                  <div class="input-group-prepend"><div class="input-group-text"><i-fa i=venus></md-ico></div></div>  
			                  <textarea rows="2" ng-model="dataEntity.patient.historia_aobstetricos" class="form-control"></textarea>
			                </div>
			              </div>
			            </div>
		              <div layout-xs=column layout=row layout-padding>
			              <div class="form-group required" flex>
			                <label translate>LB_MEDICALHISTORY_G</label>
			                <div class="input-group">
			                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=pregnant_woman></md-ico></div></div>  
			                  <input parse-float type="number" step="1" min="0" class="form-control font-digital" ng-model="dataEntity.patient.historia_gestas" required>
			                </div>
			              </div>
			              <div class="form-group required" flex>
			                <label translate>LB_MEDICALHISTORY_C</label>
			                <div class="input-group">
			                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=airline_seat_flat></md-ico></div></div>  
			                  <input parse-float type="number" step="1" min="0" class="form-control font-digital" ng-model="dataEntity.patient.historia_cesareas" required>
			                </div>
			              </div>
		              </div>
		              <div layout-xs=column layout=row layout-padding>
			              <div class="form-group required" flex>
			                <label translate>LB_MEDICALHISTORY_P</label>
			                <div class="input-group">
			                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=accessibility_new></md-ico></div></div>  
			                  <input parse-float type="number" step="1" min="0" class="form-control font-digital" ng-model="dataEntity.patient.historia_partos" required>
			                </div>
			              </div>
			              <div class="form-group required" flex>
			                <label translate>LB_MEDICALHISTORY_A</label>
			                <div class="input-group">
			                  <div class="input-group-prepend"><div class="input-group-text"><md-ico i=voice_over_off></md-ico></div></div>  
			                  <input parse-float type="number" step="1" min="0" class="form-control font-digital" ng-model="dataEntity.patient.historia_abortos" required>
			                </div>
			              </div>
		              </div>
					      </div>
					    </div>
					  </div>
				  	
				  	<div><i class="fa fa-clock-o bg-gray"></i></div>
					
					</div>
				</div>
				
				<!-- FORMULARIO DE REGISTRO Y SIGNOS VITALES -->
				<div layout=column flex>
				
					<div class="timeline margin-top">
					 	<div class="time-label text-uppercase">
			        <span class="bg-orange padding-all" translate>LB_CONSULTATION_DATA</span>
			      </div>
			      
			      <!-- FORMULARIO DE REGISTRO -->
						<div>
							<i class="fa fa-address-card bg-purple"></i>
					    <div class="timeline-item">
					    	<h3 class="timeline-header text-center text-uppercase"><a href="#"><span translate>LB_REGISTRATION_FORM</span></a></h3>
					      <div class="timeline-body" layout-padding>
					      	<div layout-xs=column layout=row layout-padding>
										<div class="form-group required" flex>
											<label translate>LB_NUMBER_ATTENTION</label>
											<div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=tachometer></md-ico></div></div> 
												<input type="number" step=1 min=0 parse-float class="form-control font-digital" ng-model="frmParent.consulta_serie" required />
											</div>
										</div>
										<div class="form-group required" flex>
											<label translate>LB_DATE_ATTENTION</label>
										  <div class="input-group" max-date="maxDate" start-view="day" moment-picker="frmParent.consulta_fecha_consulta">
												<div class="input-group-prepend"><div class="input-group-text"><md-ico i=event_available></md-ico></div></div> 
												<input class="form-control font-digital" ng-model="frmParent.consulta_fecha_consulta" ng-model-options="{ updateOn: 'blur' }" required />
											</div>
										</div>
									</div>
									<div class="form-group required">
										<label translate>LB_REASON_FOR_CONSULTATION</label>
										<div class="input-group">
											<div class="input-group-prepend"><div class="input-group-text"><md-ico i=comment></md-ico></div></div>
											<textarea rows="4" class="form-control" ng-model="frmParent.consulta_motivo" placeholder="Ej. Detallar motivo de consultas" required></textarea>
										</div>
									</div>
					      </div>
					    </div>
					  </div>
						
						<!-- SIGNOS VITALES -->
						<div>
							<i class="fa fa-heartbeat bg-blue"></i>
					    <div class="timeline-item">
					    	<h3 class="timeline-header text-center text-uppercase"><a href="#"><span translate>LB_VITAL_SIGNS</span></a></h3>
					      <div class="timeline-body" layout-padding>
					      	<div layout-xs=column layout=row layout-padding>
										<div class="form-group required" flex>
											<label translate>LB_WEIGHT</label>
										 	<div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=balance-scale></md-ico></div></div> 
												<input type="number" step="0.01" min=0 parse-float class="form-control font-digital" ng-model="frmParent.consulta_peso" ng-change="calcIMC()" required />
											</div>
										</div>
										<div class="form-group required" flex>
											<label translate>LB_STATURE</label>
										  <div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=arrows-v></md-ico></div></div> 
												<input type="number" step="0.01" min=0 parse-float class="form-control font-digital" ng-model="frmParent.consulta_estatura" ng-change="calcIMC()" required />
											</div>
										</div>
									</div>
									<div layout-xs=column layout=row layout-padding>
										<div class="form-group required" flex>
								 			<label translate>LB_TA</label>
								  		<div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=tachometer></md-ico></div></div> 
												<input class="form-control font-digital" ng-model="frmParent.consulta_ta" required />
											</div>
									 	</div>
										<div class="form-group required" flex>
										 	<label translate>LB_FC</label>
										  <div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=tachometer></md-ico></div></div> 
												<input class="form-control font-digital" ng-model="frmParent.consulta_fc" required />
											</div>
									 	</div>
									</div>
									<div layout-xs=column layout=row layout-padding>
										<div class="form-group required" flex>
									 		<label translate>LB_FR</label>
										  <div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=tachometer></md-ico></div></div> 
												<input class="form-control font-digital" ng-model="frmParent.consulta_fr" required />
											</div>
								 		</div>
										<div class="form-group required" flex>
									 		<label translate>LB_TEMPERATURE</label>
									  	<div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=thermometer-2></md-ico></div></div> 
												<input type="number" step="0.1" min=0 parse-float class="form-control font-digital" ng-model="frmParent.consulta_temperatura" required />
											</div>
									 	</div>
									</div>
									<div layout-xs=column layout=row layout-padding>
										<div class="form-group required" flex>
									 		<label translate>LB_SO2</label>
										  <div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=tachometer></md-ico></div></div> 
												<input class="form-control font-digital" ng-model="frmParent.consulta_so2" required />
											</div>
								 		</div>
										<div class="form-group required" flex>
									 		<label translate>LB_IMC</label>
									  	<div class="input-group">
												<div class="input-group-prepend"><div class="input-group-text"><i-fa i=tachometer></md-ico></div></div> 
												<input class="form-control font-digital" ng-model="frmParent.consulta_imc" readonly="readonly" />
											</div>
									 	</div>
									</div>
									<div layout-xs=column layout=row layout-padding>
										<div class="form-group required" flex ng-if="dataEntity.patient.persona_sexo=='MUJER'">
									 		<label translate>LB_MEDICALHISTORY_FUM</label>
										  <div class="input-group" max-date="maxDate" start-view="day" moment-picker="frmParent.consulta_fum" format="YYYY-MM-DD">
												<div class="input-group-prepend"><div class="input-group-text"><md-ico i=event_busy></md-ico></div></div> 
												<input class="form-control font-digital" ng-model="frmParent.consulta_fum" ng-model-options="{ updateOn: 'blur' }" />
											</div>
									 	</div>
									</div>
					      </div>
					    </div>
					  </div>
						
						<!-- ENFERMEDAD ACTUAL -->
						<div>
							<i class="fa fa-stethoscope bg-light-blue"></i>
					    <div class="timeline-item">
					      <div class="timeline-body" layout-padding>
									<div class="form-group required">
										<label translate>LB_CURRENT_ILLNESS</label>
										<div class="input-group">
											<div class="input-group-prepend"><div class="input-group-text"><md-ico i=not_interested></md-ico></div></div>
											<textarea rows="6" class="form-control" ng-model="frmParent.consulta_enfermedad_actual" placeholder="Ej. Detallar enfermedad" required></textarea>
										</div>
									</div>
									<div class="form-group required">
										<label translate>LB_PHYSICAL_EXAM</label>
										<div class="input-group">
											<div class="input-group-prepend"><div class="input-group-text"><i-fa i=stethoscope ></i-fa></div></div>
											<textarea rows="6" class="form-control" ng-model="frmParent.consulta_examen_fisico" placeholder="Ej. Detallar examen físico" required></textarea>
										</div>
									</div>
									<div class="form-group">
										<label translate>LB_REVIEW_ORGANS</label>
										<div class="input-group">
											<div class="input-group-prepend"><div class="input-group-text"><i-fa i=heartbeat></i-fa></div></div>
											<textarea rows="6" class="form-control" ng-model="frmParent.consulta_revision_organos" placeholder="Ej. Detallar la revisión de órganos"></textarea>
										</div>
									</div>
					      </div>
					    </div>
					  </div>
				  	
				  	<div><i class="fa fa-clock-o bg-gray"></i></div>
					</div>
				
				</div>
				
			</div>
			
		</div>
		
		<!-- DIAGNOSTICO -->
		<div layout=column flex>
			
			<div class="timeline margin-top">
				<div class="time-label text-uppercase">
	        <span class="bg-red padding-all" translate>LB_DIAGNOSIS</span>
	      </div>
	      
	      <!-- DIAGNOSTICO -->
				<div>
					<i class="fa fa-user-md bg-olive"></i>
			    <div class="timeline-item">
			      <div class="timeline-body" layout-padding>
			      
				      <div class="form-group required">
								<label translate>LB_CIE_FULLNAME</label>
								<div class="input-group">
						      <div class="input-group-prepend"><div class="input-group-text"><md-ico i=content_paste></md-ico></div></div> 
						      <ui-select class="form-control" ng-model="frmParent.fk_cie" ng-change="loadExternalData('cie',frmParent.fk_cie)" reset-search-input="false">
						        <ui-select-match class="required" placeholder="Seleccione un elemento">
						        	{{$select.selected.cie_descripcion}}
						        </ui-select-match>
										<ui-select-choices repeat="item in cieList track by $index" refresh="getExternalData('tthh/findCieByFilter','cie',$select.search)" refresh-delay="500">
											<div ng-bind-html="item.cie_descripcion | highlight: $select.search"></div>
											<small ng-bind-html="'<b>CÓDIGO:</b> '+item.cie_codigo | highlight: $select.search"></small>
										</ui-select-choices>
									</ui-select>
						    </div>
							</div>
							
							<div ng-if="frmParent.diagnosis.length>0">
								<div class="card card-success no-margin">
									<div class="card-body padding-all" layout=column layout-padding>
										<table class="table table-striped table-bordered no-margin">
			                <tr>
			                  <th style="width: 10px">#</th>
			                  <th>DESCRIPCIÓN</th>
			                  <th>DETALLE</th>
			                  <th>ELIMINAR</th>
			                </tr>
			                <tr ng-repeat="diagnosis in frmParent.diagnosis track by $index">
			                  <td>{{$index+1}}</td>
			                  <td>{{diagnosis.cie_codigo}} - {{diagnosis.cie_descripcion}}</td>
			                  <td>
			                    <select class="form-control input-sm" ng-model="diagnosis.diagnostico_estado" ng-options="val as val for (key,val) in string2JSON('MEDICAL_DIAGNOSIS_STATUS')"></select>
			                  </td>
			                  <td>
			                  	<button type="button" class="btn btn-danger btn-sm" ng-click="removeExternalData('cie',$index)"><i-fa i=trash></i-fa></button>
			                  </td>
			                </tr>
			              </table>
									</div>
								</div>
							</div>
			      </div>
					</div>
				</div>
				
				<div class="time-label text-uppercase">
	        <span class="bg-blue padding-all" translate>LB_INDICATIONS</span>
	      </div>
				
				<!-- MEDIDAS GENERALES -->
				<div>
					<i class="fa fa-comments bg-olive"></i>
			    <div class="timeline-item">
			    	<h3 class="timeline-header text-center text-uppercase"><a href="#"><span translate>LB_GENERAL_MEASURES</span></a></h3>
			      <div class="timeline-body">
							<div class="form-group required">
								<div class="input-group">
									<div class="input-group-prepend"><div class="input-group-text"><md-ico i=list_alt></md-ico></div></div>
									<textarea rows="5" class="form-control" ng-model="frmParent.consulta_planes" placeholder="Ej. Detallar indicaciones" required></textarea>
								</div>
							</div>
			      </div>
					</div>
				</div>
				
				<!-- MEDICAMENTOS -->
				<div>
					<i class="fa fa-medkit bg-purple"></i>
			    <div class="timeline-item">
			    	<h3 class="timeline-header text-center text-uppercase"><a href="#"><span translate>LB_MEDICALLY</span></a></h3>
			      <div class="timeline-body" layout-padding>
			      	<div layout-xs=column layout=row layout-padding>
				      	<div class="form-group required" flex>
						 			<label translate>LB_NEED_MEDICALLY</label>
						  		<div class="input-group">
										<div class="input-group-prepend"><div class="input-group-text"><i-fa i=flag></md-ico></div></div> 
										<select class="form-control" ng-model="frmParent.consulta_medicamento" required ng-options="val as val for (key,val) in string2JSON('yesnoLabel')"></select>
									</div>
							 	</div>
								<div class="form-group required" flex ng-if="frmParent.consulta_medicamento=='SI'">
									<label translate>TOOLBAR_MEDICINES</label>
									<div class="input-group">
							      <div class="input-group-prepend"><div class="input-group-text"><md-ico i=content_paste></md-ico></div></div> 
							      <ui-select class="form-control" ng-model="frmParent.fk_medicines" ng-change="loadExternalData('medicines',frmParent.fk_medicines)" reset-search-input="false">
							        <ui-select-match class="required" placeholder="Seleccione un elemento">
							        	{{$select.selected.medicamento_nombre + ' ' + $select.selected.medicamento_dosis}}
							        </ui-select-match>
											<ui-select-choices repeat="item in medicinesList track by $index" refresh="getExternalData('tthh/md/pharmacy/supplies/stock','medicines',$select.search)" refresh-delay="500">
												<div ng-bind-html="item.medicamento_nombre+' '+item.medicamento_dosis | highlight: $select.search"></div>
												<small ng-bind-html="'<b>CÓDIGO:</b> '+item.medicamento_codigo | highlight: $select.search"></small><br>
												<small ng-bind-html="'<b>PRESENTACION:</b> '+item.medicamento_presentacion"></small><br>
												<small ng-bind-html="'<b>V. ADMINISTRACION:</b> '+item.medicamento_via_administracion"></small><br>
												<small ng-bind-html="'<b>STOCK:</b> '+item.total_medicamento"></small>
											</ui-select-choices>
										</ui-select>
							      <span class="input-group-btn">
							      	<button type="button" ng-click="loadNewExternal()" class="btn btn-info btn-flat"><md-ico i=add></md-ico></button>
										</span>
							    </div>
								</div>
			      	</div>
								
							<div ng-if="frmParent.consulta_medicamento=='SI' && frmParent.dose.length>0">
								<div class="card card-success no-margin">
									<div class="card-body padding-all" layout=column layout-padding>
										<table class="table table-striped table-bordered no-margin">
											<col style="width:25px;text-align:center;">
											<col style="">
											<col style="width:10%">
											<col style="width:30%">
											<col style="width:75px" class="text-center">
			                <tr>
			                  <th>#</th>
			                  <th><span translate>LB_MEDICALLY</span></th>
			                  <th><span translate>LB_QUANTITY</span></th>
			                  <th><span translate>LB_INDICATIONS</span></th>
			                  <th><span translate>LB_DELETE</span></th>
			                </tr>
			                <tr ng-repeat="item in frmParent.dose track by $index">
			                  <td>{{$index+1}}</td>
			                  <td>
			                  	<div ng-if="item.receta_medicamento_tipo=='INTERNO'">
			                  		<b translate>LB_MEDICALLY</b>: {{item.medicamento_nombre}} {{item.medicamento_dosis}} ({{item.medicamento_presentacion}})<br>
			                  		<b translate>LB_STOCK</b>: {{item.total_medicamento}}
			                  	</div>
			                  	<div ng-if="item.receta_medicamento_tipo=='EXTERNO'">
			                  		<input type="text" ng-model="item.receta_medicamento_nombre" class="form-control" required />
			                  	</div>
			                  </td>
			                  <td>
			                    <input type="number" min="1" step="1" max="{{item.total_medicamento}}" parse-float ng-model="item.receta_cantidad" class="form-control font-digital" required />
			                  </td>
			                  <td>
			                    <textarea ng-model="item.receta_prescripcion" class="form-control" required ></textarea>
			                  </td>
			                  <td>
			                  	<button type="button" class="btn btn-danger btn-sm" ng-click="removeExternalData('medicines',$index)"><i-fa i=trash></i-fa></button>
			                  </td>
			                </tr>
			              </table>
									</div>
								</div>
							</div>
								
							<div ng-if="frmParent.consulta_medicamento=='SI' && frmParent.dose.length>0">
								<button type="button" ng-click="printPreviewModel('prescripcionmedica')" ng-disabled="formData.$invalid" class="btn btn-info">
									<md-ico i=save_alt></md-ico> <span translate>LB_GENERATE_RECIPE</span>
								</button>
							</div>
						
			      </div>
					</div>
				</div>
				
				<div class="time-label text-uppercase">
	        <span class="bg-olive padding-all" translate>LB_OTHERS</span>
	      </div>
				
				<!-- CITA SUBSECUENTE -->
				<div>
					<i class="fa fa-calendar bg-aqua"></i>
			    <div class="timeline-item">
			    	<h3 class="timeline-header text-center text-uppercase"><a href="#"><span translate>LB_SUBSEQUENT_APPOINTMENT</span></a></h3>
			      <div class="timeline-body" layout-padding>
			      	<div layout-xs=column layout=row layout-padding>
								<div class="form-group required" flex>
						 			<label translate>LB_NEED_SUBSEQUENT_APPOINTMENT</label>
						  		<div class="input-group">
										<div class="input-group-prepend"><div class="input-group-text"><i-fa i=flag></md-ico></div></div> 
										<select class="form-control" ng-model="frmParent.consulta_cita_subsecuente" required ng-options="val as val for (key,val) in string2JSON('yesnoLabel')"></select>
									</div>
							 	</div>
								<div class="form-group required" flex ng-if="frmParent.consulta_cita_subsecuente=='SI'">
								 	<label translate>LB_DATE_APPOINTMENT</label>
									<div class="input-group"  min-date="today" moment-picker="frmParent.consulta_cita_fecha" format="YYYY-MM-DD">
										<div class="input-group-prepend"><div class="input-group-text"><md-ico i=event_busy></md-ico></div></div> 
								    <input class="form-control" ng-model="frmParent.consulta_cita_fecha" ng-model-options="{ updateOn: 'blur' }" placeholder="Ej. 2006-06-06" required>
									</div>
							 	</div>
			      	</div>
							<div class="form-group required" ng-if="frmParent.consulta_cita_subsecuente=='SI'">
								<label translate>LB_INDICATIONS_NEXT_APPOINTMENT</label>
								<div class="input-group">
									<div class="input-group-prepend"><div class="input-group-text"><md-ico i=list_alt></md-ico></div></div>
									<textarea rows="4" class="form-control" ng-model="frmParent.consulta_cita_indicaciones" placeholder="Ej. Instrucciones para siguiente cita" required></textarea>
								</div>
							</div>
			      </div>
					</div>
				</div>
				
				<!-- DESCANSO MEDICO -->
				<div>
					<i class="fa fa-bed bg-green"></i>
			    <div class="timeline-item">
			    	<h3 class="timeline-header text-center text-uppercase"><a href="#"><span translate>LB_MEDICAL_CERTIFICATE</span></a></h3>
			      <div class="timeline-body" layout-padding>
							<div layout=column layout-padding>
								<div layout-xs=column layout=row layout-padding>
									<div class="form-group required" flex>
							 			<label translate>LB_ISSUED_MEDICAL_CERTIFICATE</label>
							  		<div class="input-group">
											<div class="input-group-prepend"><div class="input-group-text"><i-fa i=flag></md-ico></div></div> 
											<select class="form-control" ng-model="frmParent.consulta_certificadomedico" required ng-options="val as val for (key,val) in string2JSON('yesnoLabel')"></select>
										</div>
								 	</div>
									<div class="form-group required" flex ng-if="frmParent.consulta_certificadomedico=='SI'">
							 			<label translate>LB_NEED_MEDICAL_REST</label>
							  		<div class="input-group">
											<div class="input-group-prepend"><div class="input-group-text"><i-fa i=flag></md-ico></div></div> 
											<select class="form-control" ng-model="frmParent.consulta_descansomedico" required ng-options="val as val for (key,val) in string2JSON('yesnoLabel')"></select>
										</div>
								 	</div>
							 	</div>
								<div layout-xs=column layout=row layout-padding ng-if="frmParent.consulta_descansomedico=='SI'">
									<div class="form-group required" flex>
									 	<label translate>LB_FROM_DAY</label>
										<div class="input-group" moment-picker="frmParent.consulta_descansomedico_desde">
											<div class="input-group-prepend"><div class="input-group-text"><md-ico i=event></md-ico></div></div> 
									    <input class="form-control" ng-model="frmParent.consulta_descansomedico_desde" ng-model-options="{ updateOn: 'blur' }" placeholder="Ej. 2006-06-06" required>
										</div>
								 	</div>
									<div class="form-group required" flex>
									 	<label translate>LB_UNTIL_DAY</label>
										<div class="input-group" moment-picker="frmParent.consulta_descansomedico_hasta" min-date="frmParent.consulta_descansomedico_desde">
											<div class="input-group-prepend"><div class="input-group-text"><md-ico i=event_busy></md-ico></div></div> 
									    <input class="form-control" ng-model="frmParent.consulta_descansomedico_hasta" ng-model-options="{ updateOn: 'blur' }" placeholder="Ej. 2006-06-06" required>
										</div>
								 	</div>
								</div>
								<div class="form-group required" ng-if="frmParent.consulta_certificadomedico=='SI'">
									<label translate>LB_OBSERVATIONS</label>
									<div class="input-group">
										<div class="input-group-prepend"><div class="input-group-text"><md-ico i=comment></md-ico></div></div>
										<textarea rows="4" class="form-control" ng-model="frmParent.consulta_descansomedico_indicaciones" placeholder="Ej. Detalle para impresión de certificado médico..." required></textarea>
									</div>
								</div>
								<div ng-if="frmParent.consulta_certificadomedico=='SI'">
									<button type="button" ng-click="printPreviewModel('certificadosmedicos')" ng-disabled="formData.$invalid" class="btn btn-info">
										<md-ico i=save_alt></md-ico> <span translate>LB_GENERATE_MEDICAL_CERTIFICATE</span>
									</button>
								</div>
							</div>
			      </div>
					</div>
				</div>
				
				<!-- BOTONERA -->
				<div>
					<i class="fa fa-paper-plane-o bg-red"></i>
			    <div class="timeline-item">
			      <div class="timeline-body" layout=row layout-padding layout-align="space-between center">
				      <div flex>
								<a ui-sref="tthh.medical.medicalconsultations" class="btn btn-warning btn-block">
									<i-fa i=angle-double-left></i-fa> <span translate>BTN_CANCEL</span>
								</a>
							</div>
							<div flex>
								<button type="submit" class="btn btn-success btn-block" ng-disabled="formData.$invalid">
									<md-ico i=print s=18></md-ico> <span translate>BTN_SAVE</span>
								</button>
							</div>
			      </div>
					</div>
				</div>
			  
			  <div><i class="fa fa-clock-o bg-gray"></i></div>
			
			</div>
			
		</div>
		
	</form>

</div>